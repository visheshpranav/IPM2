<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">		
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<link rel="stylesheet" href="../styles/font-awesome/css/font-awesome.min.css">
<!--link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"-->
<script src="../JScript/d3.v2.js"></script>
<script src="../JScript/d3-time-format.v2.min.js"></script>
<script src="../JScript/moment-with-locales.min.js"></script>
<link rel="stylesheet" href="../styles/bootstrap-datetimepicker.min.css">
<link rel="stylesheet" href="../styles/bootstrap.min.css">
<script src="../JScript/jquery.min.js"></script>
<script src="../JScript/bootstrap-datetimepicker.min.js"></script>
<script src="../JScript/bootstrap.min.js"></script>
<script type="text/javascript" src="../JScript/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="../JScript/jquery.tablesorter.min.js"></script>
<script type="text/javascript" src="../JScript/jquery.tablesorter.widgets.js"></script>
<link rel="stylesheet" href="../styles/font-awesome/css/font-awesome.min.css">
<script src="../JScript/Lapam.js"></script>
</head>
<style>

@font-face {
font-family: 'AccentureRotis';
src: url('../styles/rotsan.woff') format('woff'); /* Modern Browsers */
}

body{
  font-family: 'AccentureRotis';
}

h1{	margin-bottom: 0; }
		
p{margin-top: 0;}
		
#Rollview {
    font-family: "AccentureRotis", Arial, Helvetica, sans-serif;
    border-collapse: collapse;
    width: 90%;
	margin-left:10px;
	font-size: 12px;
}

#Rollview td, #Rollview th {
    border: 1px solid #ddd;
    padding: 8px;
}

#Rollview tr:nth-child(first){background-color: #5d8aa8;}

#Rollview tr:nth-child(even){background-color: #f2f2f2;}

#Rollview tr:hover {background-color: #ddd;}

#Rollview th {
    padding-top: 12px;
    padding-bottom: 12px;
    text-align: left;
    background-color: #5d8aa8;
    color: white;
}
table {
font-family: "AccentureRotis",
font-size: 12px;
}
</style>

<body style="font-size: 12px; background-color: #ffffff00;">
<label id="StatusMode_lbl" style="float: left; margin-left: 10px; width: 100%; margin-bottom: 0px;"></label>
<button onclick="goBack()" style="float: right; margin-right: 10px;">Back</button>
<div class="fixed-header">
       <!-- <div class="container"> -->
	   </br>
	    <h1 id="Lbl_hdr" style="color:black; font-size:14px; font-weight:bold; font-family: AccentureRotis, sans-serif; margin-left: 10px;
    margin-bottom: 0px;"></h1>
</br>

	<div id="Rollview" class="component"></div>
<script>

function goBack(){
	window.location.href = "IMP005.html";
}
 function getParamValuesByName (queryString1) {
	var qstring = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
 // console.log(qstring.length);
    for (var i = 0; i < qstring.length; i++) {
  
    var urlparam = qstring[i].split('=');
    if (urlparam[0] == queryString1) {

       return urlparam[1];
    }
  }
}	
  
var serviceCall = getParamValuesByName('serviceCall');
console.log(serviceCall);

var current_date= new Date().getFullYear()+'-'+("0"+(new Date().getMonth()+1)).slice(-2)+'-'+("0"+new Date().getDate()).slice(-2);
if(sessionStorage.getItem("isOnline") =="true")
{
	document.getElementById("StatusMode_lbl").innerHTML = "<i class=\"fa fa-circle\" style=\"color: green;\"></i> ";
	document.getElementById("StatusMode_lbl").style.color = "green";
	var filename = "";	
	file_name = localStorage.getItem("ipm_appname") + "_" + sessionStorage.getItem("Imperative_name");
	if(localStorage.getItem("online_tp") == "false"){
		file = "online/"+file_name+"_ONL_"+serviceCall+"_"+current_date+ ".csv";
	}
	else{
		file = "online/"+file_name+"_TP_"+serviceCall+"_"+current_date+ ".csv";
	}
	//file = "online\\"+localStorage.getItem("ipm_appname").toLowerCase()+"\\imp005_nfv_060319.json";
}
else{
	document.getElementById("StatusMode_lbl").innerHTML = "<i class=\"fa fa-circle\" style=\"color: #7194b2;\"></i> ";
	document.getElementById("StatusMode_lbl").style.color = "#7194b2";
	var file_name = localStorage.getItem("ipm_appname") + "_" + localStorage.getItem("reportname").toLowerCase() + "_" + sessionStorage.getItem("Imperative_name") + "_"+ serviceCall;
	file = "Reports\\" + localStorage.getItem("ipm_UserId") + "_" + localStorage.getItem("rep_id") + "\\"+file_name+".csv";
}


 $.get(file, function(data) 
 {
	Lbl_hdr.innerText = "Servicecall/Method - " + serviceCall;
	var build = '<table id="tbl_usage">\n';
	var rows = data.split("\n");
	var isRole = false;
	var i = true;
	rows.forEach( function getvalues(thisRow) 
	{
		if(thisRow != "")
		{
		var columns = thisRow.split(",");
		if (columns[0] == "Service Call"){
			build +=" <thead> <tr>" ;
			for(var i=0;i<columns.length;i++){
				build += "<th>" + columns[i] + "</th>\n"; 
			}		
			build +="</tr></thead>\n <tbody> ";
			i = false;
		}
		else{
			build += "<tr><td>" + columns[0] +"</td>"
			for(var i=1;i<columns.length;i++){
				build += "<td>" + columns[i] + "</td>"; 
			}
			build += "</tr>\n";
		
		}
	}})
	build += "</tbody></table>";
	$("table > tr:first").css("background-color", "blue"); 
	$('#Rollview').append(build);	
 });
 
</script>
<script src="../JScript/jquery.min.js"></script>
<script src="../JScript/jquery.ba-throttle-debounce.min.js"></script>

</body>
</html>